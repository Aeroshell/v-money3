import{defineComponent as e,reactive as t,watch as n,resolveDirective as a,withDirectives as i,openBlock as u,createBlock as o}from"vue";var r={prefix:"",suffix:"",thousands:",",decimal:".",precision:2};function c(e,t=r){"number"==typeof e&&(e=e.toFixed(s(t.precision)));const n=e.indexOf("-")>=0?"-":"",a=p(l(f(e.replace(t.prefix,"").replace(t.suffix,"")),t.precision)).split(".");let i=a[0];const u=a[1];return i=function(e,t){return e.replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${t}`)}(i,t.thousands),t.prefix+n+function(e,t,n){return t?e+n+t:e}(i,u,t.decimal)+t.suffix}function f(e){return p(e).replace(/\D+/g,"")||"0"}function s(e){return t=0,n=e,a=20,Math.max(t,Math.min(n,a));var t,n,a}function l(e,t){const n=Math.pow(10,t);return(parseFloat(e)/n).toFixed(s(t))}function p(e){return e?e.toString():""}function d(e,t){const n=function(){e.setSelectionRange(t,t)};e===document.activeElement&&(n(),setTimeout(n,1))}function m(e){const t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function x(e,t){if(!t.value)return;const n=(a=r,i=t.value,a=a||{},i=i||{},Object.keys(a).concat(Object.keys(i)).reduce((function(e,t){return e[t]=void 0===i[t]?a[t]:i[t],e}),{}));var a,i;if("INPUT"!==e.tagName.toLocaleUpperCase()){const t=e.getElementsByTagName("input");1!==t.length||(e=t[0])}e.oninput=function(){let t=e.value.length-e.selectionEnd;e.value=c(e.value,n),t=Math.max(t,n.suffix.length),t=e.value.length-t,t=Math.max(t,n.prefix.length+1),d(e,t),e.dispatchEvent(m("change"))},e.onfocus=function(){d(e,e.value.length-n.suffix.length)},e.oninput(),e.dispatchEvent(m("input"))}const g=e({name:"Money3",props:{modelValue:{required:!0,type:[Number,String],default:0},masked:{type:Boolean,default:!1},precision:{type:Number,default:()=>r.precision},decimal:{type:String,default:()=>r.decimal},thousands:{type:String,default:()=>r.thousands},prefix:{type:String,default:()=>r.prefix},suffix:{type:String,default:()=>r.suffix}},directives:{money3:x},setup(e,{emit:a}){const i=t({formattedValue:""});return n((()=>e.modelValue),(t=>{const n=c(t,e);n!==i.formattedValue&&(i.formattedValue=n)})),{data:i,change:function(t){a("update:model-value",e.masked?t.target.value:function(e,t=r){const n=e.indexOf("-")>=0?-1:1,a=l(f(e.replace(t.prefix,"").replace(t.suffix,"")),t.precision);return parseFloat(a)*n}(t.target.value,e))}}}});g.render=function(e,t,n,r,c,f){const s=a("money3");return i((u(),o("input",{type:"tel",value:e.data.formattedValue,onChange:t[1]||(t[1]=(...t)=>e.change&&e.change(...t)),class:"v-money3"},null,40,["value"])),[[s,{precision:e.precision,decimal:e.decimal,thousands:e.thousands,prefix:e.prefix,suffix:e.suffix}]])};export{g as Money3,x as VMoney3};
