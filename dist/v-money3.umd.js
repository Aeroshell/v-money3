!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["v-money3"]={},e.Vue)}(this,(function(e,t){"use strict";var n={prefix:"",suffix:"",thousands:",",decimal:".",precision:2};function i(e,t=n){"number"==typeof e&&(e=e.toFixed(u(t.precision)));const i=e.indexOf("-")>=0?"-":"",c=r(a(o(e),t.precision)).split(".");let f=c[0];const s=c[1];return f=function(e,t){return e.replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${t}`)}(f,t.thousands),t.prefix+i+function(e,t,n){return t?e+n+t:e}(f,s,t.decimal)+t.suffix}function o(e){return r(e).replace(/\D+/g,"")||"0"}function u(e){return t=0,n=e,i=20,Math.max(t,Math.min(n,i));var t,n,i}function a(e,t){const n=Math.pow(10,t);return(parseFloat(e)/n).toFixed(u(t))}function r(e){return e?e.toString():""}function c(e,t){const n=function(){e.setSelectionRange(t,t)};e===document.activeElement&&(n(),setTimeout(n,1))}function f(e){const t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function s(e,t){if(!t.value)return;const o=(u=n,a=t.value,u=u||{},a=a||{},Object.keys(u).concat(Object.keys(a)).reduce((function(e,t){return e[t]=void 0===a[t]?u[t]:a[t],e}),{}));var u,a;if("INPUT"!==e.tagName.toLocaleUpperCase()){const t=e.getElementsByTagName("input");1!==t.length||(e=t[0])}e.oninput=function(){let t=e.value.length-e.selectionEnd;e.value=i(e.value,o),t=Math.max(t,o.suffix.length),t=e.value.length-t,t=Math.max(t,o.prefix.length+1),c(e,t),e.dispatchEvent(f("change"))},e.onfocus=function(){c(e,e.value.length-o.suffix.length)},e.oninput(),e.dispatchEvent(f("input"))}const l=t.defineComponent({name:"Money3",props:{modelValue:{required:!0,type:[Number,String],default:0},masked:{type:Boolean,default:!1},precision:{type:Number,default:()=>n.precision},decimal:{type:String,default:()=>n.decimal},thousands:{type:String,default:()=>n.thousands},prefix:{type:String,default:()=>n.prefix},suffix:{type:String,default:()=>n.suffix}},directives:{money3:s},setup(e,{emit:n}){const u=t.reactive({formattedValue:""});return t.watch((()=>e.modelValue),(t=>{const n=i(t,e);n!==u.formattedValue&&(u.formattedValue=n)})),{data:u,change:function(t){n("update:model-value",e.masked?t.target.value:function(e,t){const n=e.indexOf("-")>=0?-1:1,i=a(o(e),t);return parseFloat(i)*n}(t.target.value,e.precision))}}}});l.render=function(e,n,i,o,u,a){const r=t.resolveDirective("money3");return t.withDirectives((t.openBlock(),t.createBlock("input",{type:"tel",value:e.data.formattedValue,onChange:n[1]||(n[1]=(...t)=>e.change&&e.change(...t)),class:"v-money3"},null,40,["value"])),[[r,{precision:e.precision,decimal:e.decimal,thousands:e.thousands,prefix:e.prefix,suffix:e.suffix}]])},e.Money3=l,e.VMoney3=s,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
