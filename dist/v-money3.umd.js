!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["v-money3"]={},e.Vue)}(this,(function(e,t){"use strict";var n={prefix:"",suffix:"",thousands:",",decimal:".",precision:2,disableNegative:!1};function i(e,t=n){"number"==typeof e&&(e=e.toFixed(o(t.precision)));const i=t.disableNegative?"":e.indexOf("-")>=0?"-":"",l=r(u(a(e.replace(t.prefix,"").replace(t.suffix,"")),t.precision)).split(".");let c=l[0];const f=l[1];return c=function(e,t){return e.replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${t}`)}(c,t.thousands),t.prefix+i+function(e,t,n){return t?e+n+t:e}(c,f,t.decimal)+t.suffix}function a(e){return r(e).replace(/\D+/g,"")||"0"}function o(e){return t=0,n=e,i=20,Math.max(t,Math.min(n,i));var t,n,i}function u(e,t){const n=Math.pow(10,t);return(parseFloat(e)/n).toFixed(o(t))}function r(e){return e?e.toString():""}function l(e,t){const n=function(){e.setSelectionRange(t,t)};e===document.activeElement&&(n(),setTimeout(n,1))}function c(e){const t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function f(e,t){if(!t.value)return;const a=(o=n,u=t.value,o=o||{},u=u||{},Object.keys(o).concat(Object.keys(u)).reduce((function(e,t){return e[t]=void 0===u[t]?o[t]:u[t],e}),{}));var o,u;if("INPUT"!==e.tagName.toLocaleUpperCase()){const t=e.getElementsByTagName("input");1!==t.length||(e=t[0])}e.oninput=function(){let t=e.value.length-e.selectionEnd;e.value=i(e.value,a),t=Math.max(t,a.suffix.length),t=e.value.length-t,t=Math.max(t,a.prefix.length+1),l(e,t),e.dispatchEvent(c("change"))},e.onfocus=function(){l(e,e.value.length-a.suffix.length)},e.oninput(),e.dispatchEvent(c("input"))}const s=t.defineComponent({name:"Money3",props:{id:{required:!1,type:[Number,String],default:0},modelValue:{required:!0,type:[Number,String,void 0],default:void 0},masked:{type:Boolean,default:!1},precision:{type:Number,default:()=>n.precision},decimal:{type:String,default:()=>n.decimal},thousands:{type:String,default:()=>n.thousands},prefix:{type:String,default:()=>n.prefix},suffix:{type:String,default:()=>n.suffix},disableNegative:{type:Boolean,default:!1}},directives:{money3:f},setup(e,{emit:o}){const r=t.reactive({formattedValue:""});return t.watch((()=>e.modelValue),(t=>{const n=i(t,e);n!==r.formattedValue&&(r.formattedValue=n)})),{data:r,change:function(t){o("update:model-value",e.masked?t.target.value:function(e,t=n){const i=t.disableNegative?1:e.indexOf("-")>=0?-1:1,o=u(a(e.replace(t.prefix,"").replace(t.suffix,"")),t.precision);return parseFloat(o)*i}(t.target.value,e))}}}});s.render=function(e,n,i,a,o,u){const r=t.resolveDirective("money3");return t.withDirectives((t.openBlock(),t.createBlock("input",{type:"tel",id:e.id,value:e.data.formattedValue,onChange:n[1]||(n[1]=(...t)=>e.change&&e.change(...t)),class:"v-money3"},null,40,["id","value"])),[[r,{precision:e.precision,decimal:e.decimal,thousands:e.thousands,prefix:e.prefix,suffix:e.suffix,disableNegative:e.disableNegative}]])},e.Money3=s,e.VMoney3=f,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
